"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const multi_connection_1=require("../../common/multi_connection"),saved_state_1=require("../load_save/saved_state"),load_workspace_1=require("../load_save/load_workspace"),tree_diff_1=require("../tree_diff");function state_diff(e,t,a){return tree_diff_1.tree_diff(e,t,{is_leaf:(e,t)=>"object"!=typeof e||null===e||!!e.hasOwnProperty("data"),equal:(a?a.equal:void 0)||((e,t,a)=>e.data===t.data)})}function parse_settings(e){return saved_state_1.SavedState.lift(e)}async function create_workspace(e){return await load_workspace_1.LoadWorkspace.create(e)}async function save_settings(e){let t=await multi_connection_1.get().get_connection_or_default({ip:e?e.ip:void 0});const a=e&&!0===e.include_everything,s=await t.get_file("settings.json"+(a?"?everything":""));return JSON.parse(s)}exports.state_diff=state_diff,exports.parse_settings=parse_settings,exports.create_workspace=create_workspace,exports.save_settings=save_settings;